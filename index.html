<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>온실가스 배출권, 이렇게 퍼줘도 되나?</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R7LPQS1WNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-R7LPQS1WNZ');
  </script>
</head>


<style>
  @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Serif+KR:wght@200;300;400;500;600;700&display=swap');
  </style>
<link rel="stylesheet" href="./css/style.css">
<link rel="stylesheet" href="./css/dragula.css">
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.3/dragula.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="./js/countUp.min.js"> </script>
  
  <header class="header">
    <a class="logo-nstp" href="https://newstapa.org/" target="_blank"><h1>뉴스타파 홈페이지 바로가기</h1></a>    
  </header>

  <!-- 인트로 -->
  <div class="area-intro">
    <div class="intro-bg">
      <div class="sticker posco">
        <img src="./assets/sticker-posco.png" alt="">
      </div>
      <div class="sticker samsung">
        <img src="./assets/sticker-samsung.png" alt="">
      </div>
    </div>
    <p class="intro-text">국내 배출권 적용 기업 <u>온실가스🏭 배출량</u><br><span class="spec">647,390,321</span>톤<span class="sm"> (2019년 기준)</span></p>
    <p class="intro-text">온실가스 배출권 가격으로 환산하면<br><span class="spec">18,855,890,489,446</span>원<span class="sm">(약 16조 5천억 원)</span></p>
    <p class="intro-text">이 중에서 정부가 <u>'공짜'로 나눠준</u> 배출권 비용은...<br><span class="spec">17,514,483,501,260</span>원!! 😱</p>
    <h1 class="intro-title">온실가스 배출권,<br>이렇게 퍼줘도 되겠니? 🤔</h1>
    <!-- <p class="scroll-indicator">👇아래로 스크롤👇</p> -->
  </div>

  <!-- 설명 -->
  <div class="area-description">
    <h2 class="description-title">😗 온실가스 배출권이 뭐에요?</h2>
    <p class="description-text">기업이 생산 활동을 하면 그 과정에서 이산화탄소 등 온실가스 🏭 가 발생합니다. 그런데 온실가스를 무턱대고 뿜어내면 기후위기 🌏🔥 가 더 심각해지겠죠? 그래서 우리나라 정부는 2015년부터 기업들에게 <u>온실가스 배출권</u>을 할당해주고, <u>그 할당량만큼만 온실가스를 배출하도록</u> 제한하고 있어요. </p>
    <p class="description-text">그런데... 이렇게 정부가 나눠주는 <u>배출권 할당량이 지나치게 많다</u>는 지적이 나오고 있어요. 🤔 할당량이 적을수록 기업이 압박을 느껴서 온실가스를 더 적게 배출하려고 노력할텐데, 너무 많은 양을 공짜로 주고 있으니 별로 압박이 되지 않는다는거죠. <br>이렇게 정부가 나눠준 배출권 할당량을 비용으로 환산하면, 2019년 한 해에만 <span class="spec">17,076,462,086원</span>원<span class="sm">(약 15조 6천억 원!)</span>에 달한다고 해요. 엄청난 규모죠? 😲</p>
    <p class="description-text">만약 이 비용을 다른 곳에 쓴다면 얼마나 많은 일을 할 수 있을까요? 국내 주요 기업들이 '공짜'로 얻은 배출권 비용과 정부 · 공공기관 예산을 한번 비교해볼게요. <strong>아래 👇 에 있는 저울에 각 항목을 드래그해서 올려 보세요.(모바일에서는 터치도 가능) 😎</strong></p>
  </div>

  <!-- 저울 인터랙티브 -->
  <div class="area-scale">
    <div class="values-container">
      <h3 class="values-title">온실가스 무상 배출권 비용</h3>
      <div class="scale-values left"></div>
    </div>

    <div class="middle-container">
      <div class="scale-container">
        <div class="pillar"><img src="./assets/scale-pillar.png" alt=""></div>
        <div class="board">
          <div class="dish left"></div>
          <div class="dish right"></div>
        </div>
      </div>
      <div class="area-data-description">
        <div class="data-description-container">
          <div class="data-description">
          </div>
          <div>
            <p class="cost-indicator has-cost"><span id="scaleCost"></span> 원</p>
          </div>
        </div>
      </div>
    </div>

    <div class="values-container">
      <h3 class="values-title">정부 · 공공기관 예산</h3>
      <div class="scale-values right"></div>
    </div>

  </div>

  <!-- 차트 -->
  <div class="area-chart">
    <h2 class="description-title">😲 남아도는 배출권, 팔아서 돈 번 기업도?</h2>
    <p class="description-text">정부가 기업에 '공짜로' 나눠주는 배출권 비용은 태양광 발전 ☀️ 이나 풍력 발전 💨 단지를 짓는 데 쓰일 수도 있고, 재활용품을 비축하기 위한 공간도 만들 수 있어요. 또 취업취약계층이 일자리를 구하도록 도울 수도 있죠.</p>
    <p class="description-text">그런데 원래 온실가스 감축을 목표로 도입한 온실가스 배출권 제도가 제 역할을 못 하고 있는거죠. 심지어 포스코, 삼성전자처럼 온실가스🏭를 많이 배출하는 기업들은 <u>남는 배출권을 팔아서 큰 이익을 얻기도 했어요.</u></p>
    <p class="description-text">위에서 봤던 기업들이 지난 5년 간 남긴 배출권을 가격으로 환산하면 아래와 같습니다.</p>
    <div id="profit">
      <div class="profit-indicator"><img src="./assets/value-posco.png"><p class="scale-value-caption">436,416,371,706원<br><span>(약 4360억 원)</span></p></div>
      <div class="profit-indicator"><img src="./assets/value-samsung.png"><p class="scale-value-caption">30,704,919,948원<br><span>(약 307억 원)</span></p></div>
      <div class="profit-indicator"><img src="./assets/value-skhynix.png"><p class="scale-value-caption">24,124,727,132원<br><span>(약 241억 원)</span></p></div>
      <div class="profit-indicator"><img src="./assets/value-hanhwa.png"><p class="scale-value-caption">3,965,238,575원<br><span>(약 40억)</span></p></div>

    </div>
  </div>

  <!-- 아웃트로 -->
  <div class="area-outro">
    <h2 class="description-title">🤔 2050 탄소중립, 달성할 수 있을까</h2>
    <p class="description-text">온실가스 1톤은 <u>30년 된 활엽수🌳 100그루가 1년에 흡수할 수 있는 양</u>이라고 해요. 우리나라 기업들이 1년에 내뿜는 온실가스가 약 <span class="spec">5억 6천만 톤</span>(2019년 기준)이니까, 단순하게 계산하면 무려 <span class="spec">560억 그루의 나무</span>를 심어야 겨우 1년치 온실가스를 흡수할 수 있는거죠.</p>
    <p class="description-text">이렇게 어마어마한 온실가스 배출량을 줄이기 위해 우리나라 정부는 작년 10월, <a href="https://www.korea.kr/special/policyCurationView.do?newsId=148881562" target="_blank">'2050 탄소중립'</a>을 선언했어요. 2050년까지 국내 온실가스 배출량을 <span class="spec">'0'</span>으로 만들겠다는 뜻인데요.</p>
    <p class="description-text">배출량을 줄이기 위해서는 지금보다 할당량을 줄여서 기업을 압박해야 되겠죠. 그런데 뉴스타파가 정부 계획을 분석해 보니, 배출권 할당량을 2025년까지 <span class="spec">10.1%</span> 줄이기로 한 데 그쳤습니다. 물론 그만큼 줄이는 것도 쉽지는 않겠지만, '2050 탄소중립'이라는 목표에 비하면 아쉬운 게 사실이에요. 😥</p>
    <p class="description-text">온실가스 배출량을 줄이기 위해 정부와 기업의 노력이 2050 탄소중립, 정말 달성할 수 있을까요?</p>
    <p class="description-text">뉴스타파는 앞으로도 '온실가스 없는 세상'을 위해 열심히 노력하겠습니다. 😎</p>
    <div>
      <a class="nstp-donate" href="https://newstapa.org/donate_info" target="_blank">👏 뉴스타파 후원하러 가기 👏</a>
    </div>
    <!-- <div class="share-sns-container">
      <button class="share-sns-button">카카오톡 공유하기</button>
      <button class="share-sns-button">페이스북 공유하기</button>
      <button class="share-sns-button" onclick="copyUrlToClipboard()">주소 복사하기</button>
    </div> -->
  </div>
  
  <div class="area-related-contents">
    <h2 class="description-title">좀 더 자세히 알고 싶다면</h2>
    <div class="related-contents">
      <div class="related-content">
        <a href="https://newstapa.org/article/eRQBR" target="_blank">
          <img src="https://d1lawh9lju1xqd.cloudfront.net/2021/03/11173533-8032-5988-9FB7-V182J0459XYMF15IBPNW.jpg" alt="기사 보러가기">
        </a>
        <p class="related-content-caption">🔼 기사 보러가기</p>
      </div>
      <div class="related-content">
        <a href="https://data.newstapa.org/datasets/%EC%98%A8%EC%8B%A4%EA%B0%80%EC%8A%A4-%EB%B0%B0%EC%B6%9C%EA%B6%8C-%ED%95%A0%EB%8B%B9%EB%9F%89" target="_blank">
          <img src="./assets/dataportal.jpg" alt="기사 보러가기">
        </a>
        <p class="related-content-caption">🔼 원본 데이터 보러가기</p>
      </div>
    </div>
  </div>


  <footer class="footer">
    <div class="credit"></div>
  </footer>

  <script src="./js/animation.js"></script>
  <script src="./js/costChart.js"></script>

</body>

<script>
// 엘리먼트 등록
const leftValuesEl = document.querySelectorAll('.scale-values.left')[0]
const rightValuesEl = document.querySelectorAll('.scale-values.right')[0]

// 배출권 금액 데이터
let dataSet = [
  {
    name: 'posco',
    caption: '포스코',
    description: "2019년 온실가스 무상 배출권 비용 2,176,712,124,706원",
    cost: 2176712124706,
    profit: '436,416,371,706원',
    direction: false,
  },
  {
    name: 'samsung',
    caption: '삼성전자',
    description: "2019년 온실가스 무상 배출권 비용 327,640,092,434원",
    cost: 327640092434,
    profit: '30,704,919,948원',
    direction: false,
  },
  {
    name: 'skhynix',
    caption: 'SK하이닉스',
    description: "2019년 온실가스 무상 배출권 비용 151,771,158,848원",
    cost: 151771158848,
    profit: '24,124,727,132원',
    direction: false,
  },
  {
    name: 'hanhwa',
    caption: '한화솔루션',
    description: "2019년 온실가스 무상 배출권 비용 86,284,959,472원",
    cost: 86284959472,
    profit: '3,965,238,575원',
    direction: false,
  },
  {
    name: 'sunpower',
    caption: '태양광 발전단지 건설',
    description: "축구장 190개 면적에 100MW 규모의 태양광 발전단지 건설",
    cost: 344000000000,
    direction: true,
  },
  {
    name: 'windpower',
    caption: '풍력발전단지 건설',
    description: "풍력발전기 66개, 140MW 규모의 풍력 발전단지 건설",
    cost: 409700000000,
    direction: true,
  },
  {
    name: 'electriccar',
    caption: '전기자동차 지원금',
    description: "전기자동차 12만 1천대에 최대 1,900만 원씩 지원",
    cost: 1119584000000,
    direction: true,
  },
  {
    name: 'hydrocar',
    caption: '수소자동차 지원금',
    description: "수소차 15,000대에 최대 3,750만 원씩 지원",
    cost: 365500000000,
    direction: true,
  },
  {
    name: 'schoolbus',
    caption: '어린이 통학차량 LPG차 전환',
    description: "전국 어린이통학차량 12,000대에 500만 원씩 지원",
    cost: 30000000000,
    direction: true,
  },
  {
    name: 'recycle',
    caption: '재활용품 비축사업',
    description: "폐비닐, 폐지, 유리병 등 재활용 폐기물 비축 시설 구축",
    cost: 26000000000,
    direction: true,
  },
  {
    name: 'youthjob',
    caption: '청년일자리창출지원',
    description: "IT 활용가능 직무에 청년일자리 창출 지원금 4,676억원 편성",
    cost: 467600000000,
    direction: true,
  },
  {
    name: 'seniorjob',
    caption: '국민취업지원제도',
    description: "취업취약계층을 대상으로 생계지원과 취업지원서비스 제공",
    cost: 1283019000000,
    direction: true,
  },
]

// 선택지 렌더링
dataSet.map(function(e, i){
  //let elem = `<div class="scale-value" style="color: ${e.direction?'blue':'red'}" data-index="${i}"><img src="./assets/value-${e.name}.png"><p class="scale-value-caption">${e.caption}</p></div>`;
  let elem = `<div class="scale-value" data-index="${i}"><img src="./assets/value-${e.name}.png"><p class="scale-value-caption">${e.caption}</p></div>`;
  e.direction?rightValuesEl.innerHTML+=elem:leftValuesEl.innerHTML+=elem;
})

// 현재 각도
let boardDegree = 0;

// 각도 최대값
const maxDegree = 45

// 금액에 따른 각도 구하기
function getDegree(value, direction){
  let sum = dataSet.reduce((acc, cur, i) => {
    return acc + cur.cost;
  }, 0)
  let degree = (value/sum)*maxDegree;
  return direction ? degree : degree*(-1)
}

// 보드 움직이기
function rotateBoard(degree = boardDegree){
  anime({
    targets: '.board',
    rotate: degree,
    duration: 2000,
  })
  anime({
    targets: '.dish',
    rotate: degree*(-1),
    duration: 3000,
  })
}

// 설명
const dataDescriptionEl = document.querySelectorAll('.data-description')[0];
let dataDescription = [];

function rederDataDescription(){
  dataDescriptionEl.innerHTML = '';

  dataDescription.map(function(e, i){
    dataDescriptionEl.innerHTML += `<p><span class="data-description-label">${e.caption}</span> ${e.description}</p>`;
  })
}

// 금액 표시
const scaleCostEl = document.querySelector('#scaleCost');
let scaleCost = 0;

function renderScaleCost(){
  // scaleCostEl.innerHTML = scaleCost;
  let scaleCostCounter = new countUp.CountUp(scaleCostEl, scaleCost, {
    duration: 1
  });
  scaleCostCounter.start();
}

renderScaleCost();


// 드래그 앤 드롭
const leftDish = document.querySelectorAll('.dish.left')[0];
const rightDish = document.querySelectorAll('.dish.right')[0];

let onLeftValueDrag = dragula([leftValuesEl, leftDish]);
let onRightValueDrag = dragula([rightValuesEl, rightDish]);

// 왼쪽 접시
onLeftValueDrag.on('drop', function(el, source, target){  
  let data = dataSet[el.dataset.index];
  let costDegree = getDegree(data.cost, data.direction);

  if (source == leftValuesEl && target == leftDish) {
    boardDegree = boardDegree - costDegree;
    scaleCost = scaleCost + data.cost;
  } else if (source == leftDish && target == leftValuesEl) {
    boardDegree = boardDegree + costDegree;
    scaleCost = scaleCost - data.cost;
  }
  rotateBoard(boardDegree);
  renderScaleCost();

  dataDescription.push(data)
  rederDataDescription();

  el.style.left = Math.floor(Math.random() * 100) + "px";
})
.on('over', function(el, container, source){
  if (container == leftDish) {
    container.className += ' ex-over'
  }
})

// 오른쪽 접시
onRightValueDrag.on('drop', function(el, source, target){  
  let data = dataSet[el.dataset.index];
  let costDegree = getDegree(data.cost, data.direction);

  if (source == rightValuesEl && target == rightDish) {
    boardDegree = boardDegree - costDegree;
    scaleCost = scaleCost - data.cost;
  } else if (source == rightDish && target == rightValuesEl) {
    boardDegree = boardDegree + costDegree;
    scaleCost = scaleCost + data.cost;
  }
  rotateBoard(boardDegree);
  renderScaleCost();

  dataDescription.push(data)
  rederDataDescription();

  el.style.left = Math.floor(Math.random() * 100) + "px";
})

rotateBoard();

// 접시에 아이템 올렸을때 랜덤 위치
let randomPosition = Math.floor(Math.random() * 35);


// 이득량 렌더링
// const profitEl = document.querySelector('#profit');

// dataSet.map(function(e, i){
//   if (e.profit) {
//     profitEl.innerHTML += `<div class="profit-indicator" data-index="${i}"><img src="./assets/value-${e.name}.png"><span class="scale-value-caption">${e.profit}</span></div>`
//   }
//})

// 페이지 주소 복사하기
function copyUrlToClipboard(){
  var dummy = document.createElement("input");
  var text = location.href;

  document.body.appendChild(dummy);
  dummy.value = text;
  dummy.select();
  document.execCommand("copy");
  document.body.removeChild(dummy);

  alert('페이지 주소가 복사되었습니다!')
}

// 크레딧 명단 넣기 
let creditList = [
  {role: "기획·개발", name: "허현재"},
  {role: "취재", name: "신동윤"},
  {role: "데이터", name: "연다혜"},
  {role: "디자인", name: "이도현"},
]

const creditEl = document.querySelectorAll('.credit')[0];

creditList.map(function(e){
  creditEl.innerHTML += `<span class="credit-role">${e.role}</span><span class="credit-name">${e.name}</span>`;
})


</script>
</html>