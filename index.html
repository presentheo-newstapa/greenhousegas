<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>온실가스 배출 비용, 얼마나 비싸게요?</title>
</head>


<style>
  @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Serif+KR:wght@200;300;400;500;600;700&display=swap');
  </style>
<link rel="stylesheet" href="./css/style.css">
<link rel="stylesheet" href="./css/dragula.css">
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.3/dragula.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="./js/countUp.min.js"> </script>
  
  <header class="header">
    <a class="logo-nstp" href="https://newstapa.org/" target="_blank"><h1>뉴스타파 홈페이지 바로가기</h1></a>    
  </header>

  <!-- 인트로 -->
  <div class="area-intro">
    <div class="intro-bg">
      <div class="sticker posco">
        <img src="./assets/sticker-posco.png" alt="">
      </div>
      <div class="sticker samsung">
        <img src="./assets/sticker-samsung.png" alt="">
      </div>
    </div>
    <p class="intro-text">국내 배출권 적용 기업 <u>온실가스🏭 배출량</u><br><span class="spec">647,390,321</span>톤<span style="color: gray; font-size: 1rem;"> (2019년 기준)</span></p>
    <p class="intro-text">온실가스 배출권 가격으로 환산하면<br><span class="spec">18,855,890,489,446</span>원(약 16조 5천억 원)</p>
    <p class="intro-text">이 중에서 정부가 <u>'공짜'로 나눠준</u> 배출권 비용은...<br><span class="spec">17,514,483,501,260</span>원!! 😱</p>
    <h1 class="intro-title">온실가스 배출권,<br>이렇게 퍼줘도 될까?🤔</h1>
    <!-- <p class="scroll-indicator">👇아래로 스크롤👇</p> -->
  </div>

  <!-- 설명 -->
  <div class="area-description">
    <h2 class="description-title">😗 온실가스 배출권이 뭐에요?</h2>
    <p class="description-text">기업이 생산 활동을 하면 그 과정에서 이산화탄소 등 온실가스🏭가 발생합니다. <br>그런데 온실가스를 무턱대고 뿜어내면 기후위기🌏🔥가 더 심각해지겠죠? 그래서 우리나라 정부는 2015년부터 기업들에게 온실가스 배출권🎟️을 나눠주고, <u>나눠준 만큼만 온실가스를 배출하도록</u> 제한하고 있어요.</p>
    <p class="description-text">만약 정부가 나눠준 배출권보다 더 많은 온실가스🏭를 배출했다면? 다른 기업에 돈💰을 주고 배출권을 사야 됩니다. 추가 비용이 발생하는거죠. 반대로 온실가스를 적게 배출했다면, 남는 배출권을 팔아서 돈을 벌 수도 있습니다. <br>이렇게 기업이 온실가스를 더 적게 배출하도록 유도하는 제도가 바로 <u>‘온실가스 배출권 거래제’</u>에요.
      <br>(좀 더 자세하게 알고 싶다면? 👉<a href="https://youtu.be/rmPfaPhz63g" target="_blank">클릭</a>)</p>
    <h2 class="description-title">🤔 음... 좋은 제도 같은데 뭐가 문제죠?</h2>
    <p class="description-text">그런데... 현재 국내 온실가스 배출권 거래제는 <u>사실상 '있으나 마나'</u> 라는 지적이 나오고 있어요.🤔 정부가 기업에 나눠주는 배출권이 지나치게 많다는 이유인데요.</p>
    <p class="description-text">정부가 기업에 공짜로 주고 있는 배출권을 비용으로 환산하면, 2019년 기준으로 자그마치 <span class="spec">17,076,462,086원</span>원(약 15조 6천억 원)에 달한다고 해요. 엄청난 규모죠?😲</p>
    <p class="description-text">게다가 포스코, 삼성전자처럼 온실가스🏭를 많이 배출하는 기업들이 오히려 남는 배출권을 팔아서 큰 이익을 얻고 있다는 사실. 기업이 온실가스 배출에 부담을 느껴야 배출량을 줄일 수 있을텐데 이런 식이면...😅</p>
    <p class="description-text">그럼 대체 정부가 얼마나 많은 온실가스를 '공짜로' 배출하게 두고 있는지, 그 비용으로 얼마나 많은 일을 할 수 있는지 정부 · 공공기관 예산과 비교해볼게요.</p>
    <p class="description-text">아래👇에 있는 저울에 각 항목을 드래그해서 올려 보세요.😎</p>
  </div>

  <!-- 저울 인터랙티브 -->
  <div class="area-scale">
    <div class="values-container">
      <h3 class="values-title">온실가스 무상 배출권 비용</h3>
      <div class="scale-values left"></div>
    </div>

    <div>
      <div class="scale-container">
        <div class="pillar"></div>
        <div class="board">
          <div class="dish left"></div>
          <div class="dish right"></div>
        </div>
      </div>
      <div class="area-data-description">
        <div>
          <p class="cost-indicator"><span id="scaleCost"></span> 원</p>
        </div>
        
      </div>
    </div>

    <div class="values-container">
      <h3 class="values-title">정부 · 공공기관 예산안</h3>
      <div class="scale-values right"></div>
    </div>

  </div>

  <!-- 차트 -->
  <div class="area-chart">
    <p class="description-text">어때요? 생각보다 저울을 오른쪽으로 기울이기가 어려웠죠?🤔</p>
    <p class="description-text">각 데이터를 한 눈에 보면 아래와 같습니다.</p>
    <h2 class="description-title">한 눈에 보고 싶은데요?!!</h2>
    
    <canvas id="myChart"></canvas>
  </div>


  <!-- 아웃트로 -->
  <div class="area-outro">

    <h2 class="description-title">배출권 거래제 이대로 괜찮을까?</h2>
    <p class="description-text">한국 정부는 작년 10월, '2050 탄소중립'을 선언했어요. 기후위기를 막기 위해 2050년까지 온실가스 배출량을 0으로 만들겠다는 뜻인데요.</p>
    <p class="description-text">기업에게 더 부담을 줘서 온실가스를 줄이도록 해도 모자른데, 오히려 기업에게 돈을 주고 있는 상황. '2050 탄소중립', 정말 달성할 의지가 있긴 있는걸까요?</p>
    <p class="description-text">재미있게 보셨다면 아래👇👇 sns 공유 버튼도 꾹 눌러주세요😎</p>
    <!-- <div class="share-sns-container">
      <button class="share-sns-button">카카오톡 공유하기</button>
      <button class="share-sns-button">페이스북 공유하기</button>
      <button class="share-sns-button" onclick="copyUrlToClipboard()">주소 복사하기</button>
    </div> -->
    <div class="related-contents">
      <div class="related-content">
        <a href="https://newstapa.org/article/eRQBR" target="_blank">
          <img src="https://d1lawh9lju1xqd.cloudfront.net/2021/03/11173533-8032-5988-9FB7-V182J0459XYMF15IBPNW.jpg" alt="기사 보러가기">
        </a>
      </div>
      <div class="related-content">
        <a href="https://data.newstapa.org/datasets/%EC%98%A8%EC%8B%A4%EA%B0%80%EC%8A%A4-%EB%B0%B0%EC%B6%9C%EA%B6%8C-%ED%95%A0%EB%8B%B9%EB%9F%89">
          <img src="https://d1lawh9lju1xqd.cloudfront.net/2021/03/11173533-8032-5988-9FB7-V182J0459XYMF15IBPNW.jpg" alt="기사 보러가기">
        </a>
      </div>
      
    </div>
  </div>

  <footer class="footer">
    <div class="credit"></div>
    <div class="donate">
      <a href="https://newstapa.org/donate_info" target="_blank">뉴스타파 후원하기</a>
    </div>
  </footer>

  <script src="./js/animation.js"></script>
  <script src="./js/costChart.js"></script>

</body>

<script>
// 엘리먼트 등록
const leftValuesEl = document.querySelectorAll('.scale-values.left')[0]
const rightValuesEl = document.querySelectorAll('.scale-values.right')[0]

// 배출권 금액 데이터
let dataSet = [
  {
    name: 'posco',
    caption: '포스코',
    description: "2021년 예산안에는 전년도 예산 150억원 대비 150억원 (100.0%) 증액된 300억원이 편성되었다.",
    cost: 2176712124706,
    direction: false,
  },
  {
    name: 'samsung',
    caption: '삼성전자',
    description: "2021년 예산안에는 전년도 예산 150억원 대비 150억원 (100.0%) 증액된 300억원이 편성되었다.",
    cost: 327640092434,
    direction: false,
  },
  {
    name: 'skhynix',
    caption: 'SK하이닉스',
    description: "5년 평균 보전액 ₩4,824,945,426",
    cost: 151771158848,
    direction: false,
  },
  {
    name: 'hanhwa',
    caption: '한화솔루션',
    description: "5년 평균 보전액 ₩4,824,945,426",
    cost: 86284959472,
    direction: false,
  },
  {
    name: 'sunpower',
    caption: '태양광 발전단지 건설',
    description: "축구장 190개 면적에 100MW 규모의 태양광 발전단지 건설",
    cost: 344000000000,
    direction: true,
  },
  {
    name: 'windpower',
    caption: '풍력발전단지 건설',
    description: "풍력발전기 66개, 140MW 규모의 풍력 발전단지 건설",
    cost: 409700000000,
    direction: true,
  },
  {
    name: 'electriccar',
    caption: '전기자동차 지원금',
    description: "전기자동차 1대 구입 시 약 845만 원 보조금 지급",
    cost: 1119584000000,
    direction: true,
  },
  {
    name: 'hydrocar',
    caption: '수소자동차 지원금',
    description: "2021년 상반기까지 전국에 110기, 2022년까지 310기 설치 계획",
    cost: 365500000000,
    direction: true,
  },
  {
    name: 'schoolbus',
    caption: '어린이 통학차량 LPG차 전환',
    description: "총 12,000대에 500만 원씩 지원금 지급",
    cost: 30000000000,
    direction: true,
  },
  {
    name: 'recycle',
    caption: '재활용품 비축사업',
    description: "폐비닐, 폐지, 유리병 등 재활용 폐기물 비축 시설 구축",
    cost: 26000000000,
    direction: true,
  },
  {
    name: 'youthjob',
    caption: '청년일자리창출지원',
    description: "청년디지털일자리 사업1)은 IT 활용가능 직무에 청년을 채용하는 중소 · 중견기업 에게 최대 6개월간 인건비를 지원하는 사업으로, 청년일자리창출지원의 내역사업이 다. 이 사업의 2021년도 예산안은 전년 추경예산 대비 935억 3,600만원이 감액된 4,676억원을 편성하였다.",
    cost: 467600000000,
    direction: true,
  },
  {
    name: 'seniorjob',
    caption: '국민취업지원제도',
    description: "국민취업지원제도 사업1)은 「구직자 취업촉진 및 생활안정지원에 관한 법률」(이 하 “「구직자취업촉진법」”)에 따라 도입된 ‘한국형 실업부조’로서 저소득 구직자, 청년 신규실업자, 경력단절여성 등 취업취약계층을 대상으로 생계지원과 취업지원서비스를 제공하는 단위사업이다. 이 단위사업의 2021년도 예산안은 전년대비 5,592억원이 증 액된 1조 2,830억 1,900만원을 편성하였다.",
    cost: 1283019000000,
    direction: true,
  },
]

// 선택지 렌더링
dataSet.map(function(e, i){
  //let elem = `<div class="scale-value" style="color: ${e.direction?'blue':'red'}" data-index="${i}"><img src="./assets/value-${e.name}.png"><p class="scale-value-caption">${e.caption}</p></div>`;
  let elem = `<div class="scale-value" data-index="${i}"><img src="./assets/value-${e.name}.png"><p class="scale-value-caption">${e.caption}</p></div>`;
  e.direction?rightValuesEl.innerHTML+=elem:leftValuesEl.innerHTML+=elem;
})

// 현재 각도
let boardDegree = 0;

// 각도 최대값
const maxDegree = 45

// 금액에 따른 각도 구하기
function getDegree(value, direction){
  let sum = dataSet.reduce((acc, cur, i) => {
    return acc + cur.cost;
  }, 0)
  let degree = (value/sum)*maxDegree;
  return direction ? degree : degree*(-1)
}

// 보드 움직이기
function rotateBoard(degree = boardDegree){
  anime({
    targets: '.board',
    rotate: degree,
    duration: 2000,
  })
  anime({
    targets: '.dish',
    rotate: degree*(-1),
    duration: 3000,
  })
}

// 설명
const dataDescriptionEl = document.querySelectorAll('.area-data-description')[0];
let dataDescription = [];

function rederDataDescription(){
  dataDescription.map(function(e, i){
    dataDescriptionEl.innerHTML += e.description
  })
}

// 금액 표시
const scaleCostEl = document.querySelector('#scaleCost');
let scaleCost = 0;

function renderScaleCost(){
  // scaleCostEl.innerHTML = scaleCost;
  let scaleCostCounter = new countUp.CountUp(scaleCostEl, scaleCost, {
    duration: 1
  });
  scaleCostCounter.start();
}

renderScaleCost();


// 드래그 앤 드롭
const leftDish = document.querySelectorAll('.dish.left')[0];
const rightDish = document.querySelectorAll('.dish.right')[0];

let onLeftValueDrag = dragula([leftValuesEl, leftDish]);
let onRightValueDrag = dragula([rightValuesEl, rightDish]);

// 왼쪽 접시
onLeftValueDrag.on('drop', function(el, source, target){  
  let data = dataSet[el.dataset.index];
  let costDegree = getDegree(data.cost, data.direction);

  if (source == leftValuesEl && target == leftDish) {
    boardDegree = boardDegree - costDegree;
    scaleCost = scaleCost + data.cost;
  } else if (source == leftDish && target == leftValuesEl) {
    boardDegree = boardDegree + costDegree;
    scaleCost = scaleCost - data.cost;
  }
  rotateBoard(boardDegree);
  renderScaleCost();
})
.on('over', function(el, container, source){
  if (container == leftDish) {
    container.className += ' ex-over'
  }
})

// 오른쪽 접시
onRightValueDrag.on('drop', function(el, source, target){  
  let data = dataSet[el.dataset.index];
  let costDegree = getDegree(data.cost, data.direction);

  if (source == rightValuesEl && target == rightDish) {
    boardDegree = boardDegree - costDegree;
  } else if (source == rightDish && target == rightValuesEl) {
    boardDegree = boardDegree + costDegree;
  }
  rotateBoard();
})

rotateBoard();


// 페이지 주소 복사하기
function copyUrlToClipboard(){
  var dummy = document.createElement("input");
  var text = location.href;

  document.body.appendChild(dummy);
  dummy.value = text;
  dummy.select();
  document.execCommand("copy");
  document.body.removeChild(dummy);

  alert('페이지 주소가 복사되었습니다!')
}

// 크레딧 명단 넣기 
let creditList = [
  {role: "기획·개발", name: "허현재"},
  {role: "취재", name: "신동윤"},
  {role: "데이터", name: "연다혜"},
  {role: "디자인", name: "이도현"},
]

const creditEl = document.querySelectorAll('.credit')[0];

creditList.map(function(e){
  creditEl.innerHTML += `<span class="credit-role">${e.role}</span><span class="credit-name">${e.name}</span>`;
})


</script>
</html>